/// System log entries for auditing critical events such as community
/// creation, user joins/leaves, and system error conditions. Captures action
/// type, actor, target entity, timestamp, and contextual details for
/// debugging and compliance purposes.
///
/// @namespace Logging
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model communitybbs_log {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id
  
  /// Reference to the user who performed the action. {@link
  /// communitybbs_member.id} or {@link communitybbs_administrator.id}.
  actor_id String?
  
  /// Reference to the entity affected by the action. {@link
  /// communitybbs_community.id} for community actions, {@link
  /// communitybbs_post.id} for post actions, etc.
  target_id String?
  
  /// The type of action logged. Examples: 'community_created', 'user_joined',
  /// 'user_left', 'post_deleted', 'system_error'.
  action_type String
  
  /// Additional contextual details about the action, such as error codes,
  /// failed values, or event parameters. May include JSON-formatted metadata.
  details String?
  
  /// Timestamp when the log entry was created. Records the exact moment the
  /// event occurred.
  created_at DateTime
  
  /// The IP address from which the action was initiated. Useful for security
  /// investigations and geolocation analysis.
  ip_address String?
  
  //----
  // RELATIONS
  //----
  actor communitybbs_member? @relation(fields: [actor_id], references: [id], onDelete: Cascade)
  target communitybbs_community? @relation(fields: [target_id], references: [id], onDelete: Cascade)
  
  @@index([action_type])
  @@index([created_at])
  @@index([actor_id, created_at])
  @@index([target_id, action_type, created_at])
}