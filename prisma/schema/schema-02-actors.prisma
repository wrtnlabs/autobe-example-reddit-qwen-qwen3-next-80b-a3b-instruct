/// Represents an unauthenticated user session. Each guest has a unique IP
/// address and is tracked for anonymous interactions such as reading posts
/// and comments. This entity is critical for identifying unauthenticated
/// behavior and ensuring fair rate limiting. The system does not require
/// authentication for guest access, so no credentials are stored. This model
/// exists as a primary entity to accurately track anonymous usage patterns
/// in user analytics and system monitoring.
///
/// @namespace Actors
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model communitybbs_guest {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id
  
  /// The public IP address of the guest user. Used for rate limiting, abuse
  /// detection, and analytics. Not human-readable identifier.
  ip_address String
  
  /// Default display name for unauthenticated users. May be null. When no
  /// display name is provided, system defaults to "Anonymous".
  display_name String?
  
  /// Timestamp when this guest session was first recorded.
  created_at DateTime
  
  /// Timestamp when this guest's IP address or display name was last updated.
  updated_at DateTime
  
  //----
  // RELATIONS
  //----
  @@unique([ip_address])
  @@index([created_at])
  @@index([updated_at])
}

/// Represents an authenticated regular user who can create, edit, and vote
/// on content. Members have login credentials and active sessions. They can
/// join communities, post, comment, and vote. This is a primary entity with
/// core identity and authorization state. It references a session for
/// persistent authentication and is linked to all user-generated content
/// through foreign keys in other tables. This model is essential for
/// enforcing ownership and access control rules as defined in the
/// requirements.
///
/// @namespace Actors
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model communitybbs_member {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id
  
  /// Unique email address used as the primary login identifier. Must be a
  /// valid email format and unique across all users.
  email String
  
  /// BCrypt-hashed password for authentication. Never stored in plain text.
  /// Required for login functionality.
  password_hash String
  
  /// User's chosen display name used in UI for comments and posts. Defaults to
  /// username if not set. Max 32 characters as per requirements.
  display_name String
  
  /// Timestamp when this member account was created.
  created_at DateTime
  
  /// Timestamp when this member's profile was last modified (e.g., display
  /// name change).
  updated_at DateTime
  
  //----
  // RELATIONS
  //----
  communitybbs_post communitybbs_post[]
  communitybbs_comment communitybbs_comment[]
  communitybbs_vote communitybbs_vote[]
  communitybbs_session communitybbs_session[]
  communitybbs_log communitybbs_log[]
  
  @@unique([email])
  @@index([created_at])
  @@index([updated_at])
}

/// Represents a system administrator with elevated privileges including
/// content moderation, community management, and user bans. This role has
/// direct access to administrative functions and overrides member
/// permissions. Administrators are manually assigned and require explicit
/// authentication. This entity is primary because administrators must be
/// independently identifiable, auditable, and manageable through API
/// endpoints for system maintenance, not derived from member roles.
///
/// @namespace Actors
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model communitybbs_administrator {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id
  
  /// References the active session for this administrator. {@link
  /// communitybbs_session.id}.
  session_id String
  
  /// Unique email address used as the primary login identifier. Must be a
  /// valid email format and unique across all users.
  email String
  
  /// BCrypt-hashed password for authentication. Never stored in plain text.
  /// Required for login functionality.
  password_hash String
  
  /// Admin's display name used in moderation logs and UI. For clarity in audit
  /// trails.
  display_name String
  
  /// Timestamp when this administrator account was created.
  created_at DateTime
  
  /// Timestamp when this administrator's profile was last modified.
  updated_at DateTime
  
  //----
  // RELATIONS
  //----
  session communitybbs_session @relation(fields: [session_id], references: [id], onDelete: Cascade)
  
  @@unique([session_id])
  
  @@unique([email])
  @@index([created_at])
  @@index([updated_at])
  @@index([session_id])
}